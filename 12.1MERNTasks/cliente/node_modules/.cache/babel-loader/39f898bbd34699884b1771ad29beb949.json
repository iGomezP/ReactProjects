{"ast":null,"code":"import _regeneratorRuntime from\"/home/vakaz/Documentos/React/12MERNTasks/cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/vakaz/Documentos/React/12MERNTasks/cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/vakaz/Documentos/React/12MERNTasks/cliente/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useReducer}from\"react\";import ProyectoContext from\"./ProyectoContext\";import ProyectoReducer from\"./ProyectoReducer\";import clienteAxios from\"../../config/axios\";import{FORMULARIO_PROYECTO,OBTENER_PROYECTOS,AGREGAR_PROYECTO,VALIDAR_FORMULARIO,PROYECTO_ACTUAL,ELIMINAR_PROYECTO,PROYECTO_ERROR}from\"../../types\";import{jsx as _jsx}from\"react/jsx-runtime\";var ProyectoState=function ProyectoState(props){var initialState={proyectos:[],formulario:false,errorFormulario:false,proyecto:null,mensaje:null};// Dispatch para ejecutar las acciones\nvar _useReducer=useReducer(ProyectoReducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];// Serie de funciones para el CRUD\nvar mostrarFormulario=function mostrarFormulario(){dispatch({type:FORMULARIO_PROYECTO});};// Obtener los proyectos\nvar obtenerProyectos=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resultado,alerta;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return clienteAxios.get('/api/proyectos');case 3:resultado=_context.sent;dispatch({type:OBTENER_PROYECTOS,// El payload es lo que toma la función como parámetro\npayload:resultado.data.proyectos});_context.next=11;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);alerta={msg:'Hubo un error',categoria:'alerta-error'};dispatch({type:PROYECTO_ERROR,payload:alerta});case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function obtenerProyectos(){return _ref.apply(this,arguments);};}();// Agregar nuevo proyecto\nvar agregarProyecto=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(proyecto){var resultado,alerta;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return clienteAxios.post('/api/proyectos',proyecto);case 3:resultado=_context2.sent;// console.log( resultado );\n// Insertar el proyecto en el state\ndispatch({type:AGREGAR_PROYECTO,payload:resultado.data});_context2.next=11;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);alerta={msg:'Hubo un error',categoria:'alerta-error'};dispatch({type:PROYECTO_ERROR,payload:alerta});case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function agregarProyecto(_x){return _ref2.apply(this,arguments);};}();// Valida el formulario por errores\nvar mostrarError=function mostrarError(){dispatch({type:VALIDAR_FORMULARIO});};// Selecciona el proyecto al que el usuario dio click\nvar proyectoActual=function proyectoActual(proyectoId){dispatch({type:PROYECTO_ACTUAL,payload:proyectoId});};// Elimina un proyecto\nvar eliminarProyecto=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(proyectoId){var alerta;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return clienteAxios.delete(\"/api/proyectos/\".concat(proyectoId));case 3:dispatch({type:ELIMINAR_PROYECTO,payload:proyectoId});_context3.next=10;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);alerta={msg:'Hubo un error',categoria:'alerta-error'};dispatch({type:PROYECTO_ERROR,payload:alerta});case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function eliminarProyecto(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(ProyectoContext.Provider,{value:{// ¿ States\nproyectos:state.proyectos,formulario:state.formulario,errorFormulario:state.errorFormulario,proyecto:state.proyecto,mensaje:state.mensaje,// ¿ Funciones\nmostrarFormulario:mostrarFormulario,obtenerProyectos:obtenerProyectos,agregarProyecto:agregarProyecto,mostrarError:mostrarError,proyectoActual:proyectoActual,eliminarProyecto:eliminarProyecto},children:props.children});};export default ProyectoState;","map":{"version":3,"sources":["/home/vakaz/Documentos/React/12MERNTasks/cliente/src/context/proyectos/ProyectoState.jsx"],"names":["useReducer","ProyectoContext","ProyectoReducer","clienteAxios","FORMULARIO_PROYECTO","OBTENER_PROYECTOS","AGREGAR_PROYECTO","VALIDAR_FORMULARIO","PROYECTO_ACTUAL","ELIMINAR_PROYECTO","PROYECTO_ERROR","ProyectoState","props","initialState","proyectos","formulario","errorFormulario","proyecto","mensaje","state","dispatch","mostrarFormulario","type","obtenerProyectos","get","resultado","payload","data","alerta","msg","categoria","agregarProyecto","post","mostrarError","proyectoActual","proyectoId","eliminarProyecto","delete","children"],"mappings":"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","sourcesContent":["import { useReducer } from \"react\";\r\nimport ProyectoContext from \"./ProyectoContext\";\r\nimport ProyectoReducer from \"./ProyectoReducer\";\r\nimport clienteAxios from \"../../config/axios\";\r\nimport {\r\n  FORMULARIO_PROYECTO,\r\n  OBTENER_PROYECTOS,\r\n  AGREGAR_PROYECTO,\r\n  VALIDAR_FORMULARIO,\r\n  PROYECTO_ACTUAL,\r\n  ELIMINAR_PROYECTO,\r\n  PROYECTO_ERROR\r\n} from \"../../types\";\r\n\r\nconst ProyectoState = props => {\r\n\r\n  const initialState = {\r\n    proyectos: [],\r\n    formulario: false,\r\n    errorFormulario: false,\r\n    proyecto: null,\r\n    mensaje: null\r\n  }\r\n\r\n  // Dispatch para ejecutar las acciones\r\n  const [ state, dispatch ] = useReducer( ProyectoReducer, initialState );\r\n\r\n  // Serie de funciones para el CRUD\r\n\r\n  const mostrarFormulario = () => {\r\n    dispatch( {\r\n      type: FORMULARIO_PROYECTO\r\n    } );\r\n  }\r\n\r\n  // Obtener los proyectos\r\n  const obtenerProyectos = async () => {\r\n\r\n    try {\r\n\r\n      const resultado = await clienteAxios.get( '/api/proyectos' );\r\n\r\n      dispatch( {\r\n        type: OBTENER_PROYECTOS,\r\n        // El payload es lo que toma la función como parámetro\r\n        payload: resultado.data.proyectos\r\n      } );\r\n\r\n    } catch ( error ) {\r\n      const alerta = {\r\n        msg: 'Hubo un error',\r\n        categoria: 'alerta-error'\r\n      }\r\n\r\n      dispatch( {\r\n        type: PROYECTO_ERROR,\r\n        payload: alerta\r\n      } )\r\n    }\r\n\r\n  };\r\n\r\n  // Agregar nuevo proyecto\r\n  const agregarProyecto = async proyecto => {\r\n\r\n    try {\r\n\r\n      const resultado = await clienteAxios.post( '/api/proyectos', proyecto );\r\n      // console.log( resultado );\r\n\r\n      // Insertar el proyecto en el state\r\n      dispatch( {\r\n        type: AGREGAR_PROYECTO,\r\n        payload: resultado.data\r\n      } )\r\n\r\n    } catch ( error ) {\r\n      const alerta = {\r\n        msg: 'Hubo un error',\r\n        categoria: 'alerta-error'\r\n      }\r\n\r\n      dispatch( {\r\n        type: PROYECTO_ERROR,\r\n        payload: alerta\r\n      } );\r\n    }\r\n\r\n  };\r\n\r\n  // Valida el formulario por errores\r\n  const mostrarError = () => {\r\n    dispatch( {\r\n      type: VALIDAR_FORMULARIO\r\n    } )\r\n  };\r\n\r\n  // Selecciona el proyecto al que el usuario dio click\r\n  const proyectoActual = proyectoId => {\r\n    dispatch( {\r\n      type: PROYECTO_ACTUAL,\r\n      payload: proyectoId\r\n    } )\r\n  };\r\n\r\n  // Elimina un proyecto\r\n  const eliminarProyecto = async proyectoId => {\r\n\r\n    try {\r\n\r\n      await clienteAxios.delete( `/api/proyectos/${ proyectoId }` );\r\n\r\n      dispatch( {\r\n        type: ELIMINAR_PROYECTO,\r\n        payload: proyectoId\r\n      } );\r\n\r\n    } catch ( error ) {\r\n      const alerta = {\r\n        msg: 'Hubo un error',\r\n        categoria: 'alerta-error'\r\n      }\r\n\r\n      dispatch( {\r\n        type: PROYECTO_ERROR,\r\n        payload: alerta\r\n      } )\r\n\r\n    }\r\n\r\n  };\r\n\r\n  return (\r\n    <ProyectoContext.Provider\r\n      value={ {\r\n        // ¿ States\r\n        proyectos: state.proyectos,\r\n        formulario: state.formulario,\r\n        errorFormulario: state.errorFormulario,\r\n        proyecto: state.proyecto,\r\n        mensaje: state.mensaje,\r\n        // ¿ Funciones\r\n        mostrarFormulario,\r\n        obtenerProyectos,\r\n        agregarProyecto,\r\n        mostrarError,\r\n        proyectoActual,\r\n        eliminarProyecto\r\n      } }\r\n    >\r\n      { props.children }\r\n    </ProyectoContext.Provider>\r\n  )\r\n}\r\n\r\nexport default ProyectoState;"]},"metadata":{},"sourceType":"module"}